<!-- SH -->

<!-- 




 -->





<!DOCTYPE html>
<html lang="ja">  <!-- 日本語のページだと宣言(翻訳しますか？のメッセージを表示させないようにするため) -->
  <head>
    <meta charset="utf-8">


    <!-- 日本語のページだと宣言(翻訳しますか？のメッセージを表示させないようにするため) -->
    <!-- 上でも対処しているが、念のためここでも行う -->
    <meta http-equiv="content-language" content="ja">


    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    
    
    <title>sh</title>

    <!-- tag用 -->
    <!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/themes/smoothness/jquery-ui.css" />
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/jquery-ui.min.js"></script> -->


    


    <!-- プレビュー -->
    <!-- <script src="./sample_script_preview.js"></script> -->

    <!-- レイアウト -->
    <link rel="stylesheet" href="./sh.css">

    <!-- model-viewer用レイアウト -->
    <link rel="stylesheet" href="./modelviewer.css">

    <!-- 設定用レイアウト -->
    <link rel="stylesheet" href="../common/setting.css">

    <!-- JSファイル読み込み -->
    <!-- 100VWにスクロールバーを含めない用の計算ファイル -->
    <script src="../common/vw.js"></script>


    

    <!-- デザイン用 -->

    <!-- フォント Note Sans Japaneze 導入-->
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP" rel="stylesheet">
  
    <!-- ボトムナビゲーション用アイコンリンク(font awesome) -->
    <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">

    

    <!-- ヘッダーファイル読み込み用JS -->
    <script type="text/javascript" src="../common/header.js"></script>

    <!-- フッターファイル読み込み用JS -->
    <script type="text/javascript" src="../common/footer.js"></script>


    <!-- model-viewerのJSファイルを取り込む -->
    <script type="module" src = "../source/model-viewer_code.js"></script>  
     
    <!-- CDNによりmodel-viewerを取り込む -->
    <!-- <script src="https://unpkg.com/@google/model-viewer/dist/model-viewer.js"></script> -->
    
    <!-- Import the component -->
    <!-- <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script> -->



  </head>





  
  <body>
    <!-- ヘッダー、メイン、フッターを並べるクラス -->
    <div class="wrapper">

      
      <header></header>
      <!-- ここに外部HTMLのheader要素が挿入されます -->    
      <!-- 上記で設定したコードで下記のコードが挿入されるため、本番では必要ない -->
      <!-- <script type="text/javascript" src="header.js"></script> -->



      

      <!-- メイン -->
      <main>



        <!-- 要素作成 -->
        <!-- <script type="module" src="./element_create.js"></script> -->
        <script type="module" src="./element_create_r1.js"></script>

        <!-- modelviewer 3Dモデル設定 -->
        <script type="module" src="./modelviewer_3d_set.js"></script>



        <!-- カメラリセット -->
         <!-- ARカメラ起動後、このページに戻って来た時に3Dモデルにカメラが近づいてしまうため -->
        <!-- <script src="./camera_reset.js"></script> -->
        <!-- <script type="module" src="./camera_reset.js" defer></script> -->












      </main>






      <!-- フッターj用ファイル -->
      <footer></footer>

    </div>
  </body>
</html>







<!-- 寸法関連処理 -->
<!-- <script type="module" src="./dot.js"></script> -->
<!-- <script type="module" src="./dot_r1.js"></script> -->










<script type="module">  /* このスクリプトはモジュールであると宣言、モジュール(単なるファイル、JSファイル等)を呼び出して自動的に実行、実行はスクリプトの最後になる */
  
  // const modelViewer = document.querySelector('#modeViewer-0');


  // //寸法点、寸法
  // // ボタンを作成するためのデータ
  // const buttonsData = [
  //   { slot: 'hotspot-dot+X-Y+Z', class: 'dot', dataPosition: '1 -1 1', dataNormal: '1 0 0' },
  //   { slot: 'hotspot-dim+X-Y', class: 'dim', dataPosition: '1 -1 0', dataNormal: '1 0 0' },
  //   { slot: 'hotspot-dot+X-Y-Z', class: 'dot', dataPosition: '1 -1 -1', dataNormal: '1 0 0' },
  //   { slot: 'hotspot-dim+X-Z', class: 'dim', dataPosition: '1 0 -1', dataNormal: '1 0 0' },
  //   { slot: 'hotspot-dot+X+Y-Z', class: 'dot show', dataPosition: '1 1 -1', dataNormal: '0 1 0' },
  //   { slot: 'hotspot-dim+Y-Z', class: 'dim show', dataPosition: '0 -1 -1', dataNormal: '0 1 0' },
  //   { slot: 'hotspot-dot-X+Y-Z', class: 'dot show', dataPosition: '-1 1 -1', dataNormal: '0 1 0' },
  //   { slot: 'hotspot-dim-X-Z', class: 'dim', dataPosition: '-1 0 -1', dataNormal: '-1 0 0' },
  //   { slot: 'hotspot-dot-X-Y-Z', class: 'dot', dataPosition: '-1 -1 -1', dataNormal: '-1 0 0' },
  //   { slot: 'hotspot-dim-X-Y', class: 'dim', dataPosition: '-1 -1 0', dataNormal: '-1 0 0' },
  //   { slot: 'hotspot-dot-X-Y+Z', class: 'dot', dataPosition: '-1 -1 1', dataNormal: '-1 0 0' }
  // ];

  // // 各ボタンを作成し、親要素に追加
  // buttonsData.forEach(data => {
  //   const button = document.createElement('button');
  //   button.setAttribute('slot', data.slot);
  //   button.className = data.class;
  //   button.setAttribute('data-position', data.dataPosition);
  //   button.setAttribute('data-normal', data.dataNormal);
  //   modelViewer.appendChild(button);
  // });  












  // // div要素を作成
  // const controlsDiv = document.createElement('div');
  // controlsDiv.id = 'controls';
  // controlsDiv.classList.add('dim'); // 'dim' クラスを追加

  // // 表示オブジェクトのラベルを作成
  // const srcLabel = document.createElement('label');
  // srcLabel.textContent = '表示オブジェクト:';
  // srcLabel.setAttribute('for', 'src');

  // // 表示オブジェクトの選択肢を作成
  // const srcSelect = document.createElement('select');
  // srcSelect.id = 'src';

  // // 選択肢を追加
  // const options = [
  //   { value: '../3d/cube_small.glb', text: 'cube_small(小)' },
  //   { value: '../3d/dog_0.glb', text: 'dogtag' },
  //   { value: '', text: 'オブジェクト無し' }
  // ];

  // options.forEach(option => {
  //   const optionElement = document.createElement('option');
  //   optionElement.value = option.value;
  //   optionElement.textContent = option.text;
  //   srcSelect.appendChild(optionElement);
  // });

  // // 寸法ON/OFFのラベルを作成
  // const dimensionsLabel = document.createElement('label');
  // dimensionsLabel.textContent = '寸法ON/OFF:';
  // dimensionsLabel.setAttribute('for', 'show-dimensions');

  // // 寸法ON/OFFのチェックボックスを作成
  // const showDimensionsCheckbox = document.createElement('input');
  // showDimensionsCheckbox.id = 'show-dimensions';
  // showDimensionsCheckbox.type = 'checkbox';
  // showDimensionsCheckbox.checked = true; // デフォルトでチェックされている

  // // ラベルとチェックボックスをdiv要素に追加
  // controlsDiv.appendChild(srcLabel);
  // controlsDiv.appendChild(srcSelect);
  // controlsDiv.appendChild(document.createElement('br')); // 改行を追加
  // controlsDiv.appendChild(dimensionsLabel);
  // controlsDiv.appendChild(showDimensionsCheckbox);

  // // modelViewerにcontrolsDivを追加
  // modelViewer.appendChild(controlsDiv);



  //     /* dimension-demoというid名(model-viewer)のHTML要素を、変数modelViewerに入れる */
  //     /* const：書き換え不可 */ /* modelViewer：変数 */ /* document：HTLM要素の情報取得、要素書き換えができる */ /* querySelector：取得するHTML要素を指定(class名 → (.class名)、id名 → (#id名))できる */ 
  //     // const modelViewer = document.querySelector('#modeViewer-0');

  //     /* 下記プログラムの各コードの説明 */
  //     /* 上記のプログラムによりmodelViewerは、dimension-demoというid名のHTML要素内を表す */
  //     /* イベントを検知する対象要素.addEventListener(イベント名, イベントを検知した時にする処理(関数名), オプション) */ 
  //     /* addEventListener：イベントを検知して追加 */ 
  //     /* input：ユーザーの操作によって値が変更された時(今回はテキストボックス内の文字列が変更された時) */
  //     /* (event) => {}：{}内の処理が(event)内にそのまま入る、無名関数なので()内に文字を入れる必要はない */
  //     /* event.target：イベントが発生した要素(今回はidがdimension-demoの要素内の、idがsrcの要素内を表している) */
  //     /* event.target.value：この場合は上記の通りイベントが発生した要素内のvalueを指している */
      
  //     /* dimension-demoというid名のHTML要素内の、srcというid名(オブジェクト選択欄)のHTML要素で、値が変更された時、dimension-demoというid名のHTML要素内のsrc(表示3Dデータ)にイベント発生元のvalue(3Dデータ)が入る */
  //     /* → <要約>オブジェクト選択欄のオブジェクト名が変更されると、それに対応したオブジェクトが表示される */
  //     modelViewer.querySelector('#src').addEventListener('input', (event) => {  /*()内にeventと入っているが何も入れる必要はない*/ /* 参考　https://www.javadrive.jp/javascript/event/index24.html  https://ginpen.com/2015/12/22/event-target-elements/ */
  //       modelViewer.src = event.target.value;       //input(ユーザーの操作によって値が変更された)時に行う処理(実際は(event)内に入る) /*参考  https://www.sejuku.net/blog/57625 */
  //     });


  //     /* dimension-demoというid名(model-viewer)のHTML要素内の、show-dimensionsというid名の要素を、変数checkboxに入れる */
  //     const checkbox = modelViewer.querySelector('#show-dimensions');

  //     /* チェック欄のチェックをON/OFFした時、寸法表示/非表示切り替え */
  //     checkbox.addEventListener('change', () => {                     //チェック欄のチェックをON/OFFした時
  //       modelViewer.querySelectorAll('button').forEach((hotspot) => {   //
  //         if (checkbox.checked) {             //チェック欄にチェックが入っている時
  //           hotspot.classList.remove('hide');     //表示
  //         } else {                            //チェック欄にチェックが入っていない時
  //           hotspot.classList.add('hide');        //非表示
  //         }
  //       });
  //     });



  //     /* カメラが移動した時、寸法点と寸法をオブジェクトに追従させるコード */
  //     /*
  //     オブジェクトの寸法は四角柱で、それに寸法点と寸法を対応させるためには下記のようにする必要がある
  //     1. オブジェクトの中心点と、オブジェクトの寸法を取得する
  //     2. x軸の寸法の1/2の値を取得。y軸、z軸も同じように取得

  //     3. 寸法点1の場合 → オブジェクト中心点からx軸方向に+1/2x(オブジェクト寸法xの1/2)の距離、y軸方向に-1/2yの距離、z軸方向に+1/2zのの距離を行った位置に寸法点を表示
  //     4. その他の寸法点、寸法も同じ様な形で表示する
      
  //     ※言葉だけでは分かりずらいので、図を描いた。同じフォルダ内の"寸法点と寸法 説明"というフォルダの中に置いてある。
  //     */
  //     //手順1.2.
  //     modelViewer.addEventListener('load', () => {      /* dimension-demoというid名の全てのHTML要素を読み込んだ時、*/

  //       const center = modelViewer.getCameraTarget();   //カメラのリアルタイムの目標位置(たぶんスマホのカメラとオブジェクト回転中心点の距離だと思う)をメートル単位で、変数centerに返す  //参考 https://modelviewer.dev/examples/stagingandcameras/#panning
  //       const size = modelViewer.getDimensions();       //モデルの(バウンディングボックスの)寸法をメートル単位で、変数sizeに返す  //参考  https://modelviewer.dev/docs/
        
  //       console.log("Center:", center);
  //       console.log("Size:", size);

  //       const x2 = size.x / 2;    //x軸の寸法の1/2を変数x2に入れる
  //       const y2 = size.y / 2;    //y軸        〃      y2に入れる
  //       const z2 = size.z / 2;    //z軸        〃      z2に入れる

  //       console.log("x:", x2, ", y:", y2, ", z:", z2);
        

        
  //       //------------------------------------------------------------------------------
  //       //手順

  //       //寸法点1
  //       modelViewer.updateHotspot({   //"name"と同じ名称のホットスポットの位置や法線を更新する
  //         name: 'hotspot-dot+X-Y+Z',    //名称
  //         position: `${center.x + x2} ${center.y - y2} ${center.z + z2}`  //この位置に更新
  //       });
        
  //       //寸法1
  //       modelViewer.updateHotspot({   //"name"と同じ名称のホットスポットの位置や法線を更新する
  //         name: 'hotspot-dim+X-Y',      //名称
  //         position: `${center.x + x2} ${center.y - y2} ${center.z}`
  //       });

  //       //寸法テキストボックス1
  //       modelViewer.querySelector('button[slot="hotspot-dim+X-Y"]').textContent =
  //           `${(size.z * 100).toFixed(0)} cm`;
    
  //       //------------------------------------------------------------------------------
  //       //寸法点2
  //       modelViewer.updateHotspot({   //"name"と同じ名称のホットスポットの位置や法線を更新する
  //         name: 'hotspot-dot+X-Y-Z',    //名称
  //         position: `${center.x + x2} ${center.y - y2} ${center.z - z2}`
  //       });
        
  //       //寸法2
  //       modelViewer.updateHotspot({   //"name"と同じ名称のホットスポットの位置や法線を更新する
  //         name: 'hotspot-dim+X-Z',      //名称
  //         position: `${center.x + x2} ${center.y} ${center.z - z2}`
  //       });

  //       //寸法テキストボックス2
  //       modelViewer.querySelector('button[slot="hotspot-dim+X-Z"]').textContent =
  //           `${(size.y * 100).toFixed(0)} cm`;
    
  //       //------------------------------------------------------------------------------
  //       //寸法点3
  //       modelViewer.updateHotspot({   //"name"と同じ名称のホットスポットの位置や法線を更新する
  //         name: 'hotspot-dot+X+Y-Z',    //名称
  //         position: `${center.x + x2} ${center.y + y2} ${center.z - z2}`
  //       });
        
  //       //寸法3
  //       modelViewer.updateHotspot({   //"name"と同じ名称のホットスポットの位置や法線を更新する
  //         name: 'hotspot-dim+Y-Z',      //名称
  //         position: `${center.x} ${center.y + y2} ${center.z - z2}`
  //       });
        
  //       //寸法テキストボックス3
  //       modelViewer.querySelector('button[slot="hotspot-dim+Y-Z"]').textContent =
  //           `${(size.x * 100).toFixed(0)} cm`;
    
  //       //------------------------------------------------------------------------------
  //       //寸法点4
  //       modelViewer.updateHotspot({   //"name"と同じ名称のホットスポットの位置や法線を更新する
  //         name: 'hotspot-dot-X+Y-Z',    //名称
  //         position: `${center.x - x2} ${center.y + y2} ${center.z - z2}`
  //       });
        
  //       //寸法4
  //       modelViewer.updateHotspot({   //"name"と同じ名称のホットスポットの位置や法線を更新する
  //         name: 'hotspot-dim-X-Z',      //名称
  //         position: `${center.x - x2} ${center.y} ${center.z - z2}`
  //       });

  //       //寸法テキストボックス4
  //       modelViewer.querySelector('button[slot="hotspot-dim-X-Z"]').textContent =
  //           `${(size.y * 100).toFixed(0)} cm`;
    
  //       //------------------------------------------------------------------------------
  //       //寸法点5
  //       modelViewer.updateHotspot({   //"name"と同じ名称のホットスポットの位置や法線を更新する
  //         name: 'hotspot-dot-X-Y-Z',    //名称
  //         position: `${center.x - x2} ${center.y - y2} ${center.z - z2}`
  //       });
        
  //       //寸法5
  //       modelViewer.updateHotspot({   //"name"と同じ名称のホットスポットの位置や法線を更新する
  //         name: 'hotspot-dim-X-Y',      //名称
  //         position: `${center.x - x2} ${center.y - y2} ${center.z}`
  //       });

  //       //寸法テキストボックス5
  //       modelViewer.querySelector('button[slot="hotspot-dim-X-Y"]').textContent =
  //           `${(size.z * 100).toFixed(0)} cm`;
    
  //       //------------------------------------------------------------------------------
  //       //寸法点6
  //       modelViewer.updateHotspot({   //"name"と同じ名称のホットスポットの位置や法線を更新する
  //         name: 'hotspot-dot-X-Y+Z',    //名称
  //         position: `${center.x - x2} ${center.y - y2} ${center.z + z2}`
  //       });
  //     });
  //     //寸法関連終わり

    </script>
    <!-- javascript終わり -->




        

